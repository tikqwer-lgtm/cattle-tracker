# Варианты размещения API (в т.ч. для РФ)

Oracle Cloud и часть зарубежных облаков недоступны или неудобны из России. Ниже — рабочие варианты.

---

## 1. Сервер на своём ПК (самый простой вариант)

Сервер крутится у вас дома на компьютере; другие устройства подключаются к нему по интернету.

**Плюсы:** бесплатно, данные у вас, нет блокировок по гео.  
**Минусы:** ПК должен быть включён и в сети; нужен белый IP или туннель.

### Вариант A: Роутер с белым IP + проброс порта

1. На ПК: `cd server`, `npm start` (или запуск через systemd/планировщик при загрузке).
2. В роутере: пробросить порт **3000** на IP этого ПК (Port Forwarding / NAT).
3. Узнать внешний IP: [2ip.ru](https://2ip.ru) или в настройках роутера. Если провайдер даёт статический IP — подключаться так: `http://ВАШ_IP:3000`.
4. Если IP динамический — завести бесплатный DNS (No-IP, DuckDNS, или встроенный в роутер) и в клиентах указывать `http://ваш-домен.duckdns.org:3000`.

В клиентах: режим API, URL = `http://ВАШ_IP:3000` или `http://домен:3000` (без слэша в конце).

### Вариант B: Tailscale (без проброса портов)

1. Установите [Tailscale](https://tailscale.com) на ПК с сервером и на телефонах/других ПК.
2. Запустите сервер на ПК: `node server.js` (порт 3000).
3. В клиентах укажите URL вида `http://100.x.x.x:3000`, где `100.x.x.x` — Tailscale-IP этого ПК (узнать: на ПК `tailscale ip -4`).

Плюс: не нужно настраивать роутер, всё идёт по зашифрованной сети Tailscale. Работает из любой страны.

---

## 2. Российский VPS / облако (платно, недорого)

Любой VPS с Linux даёт постоянный диск — SQLite будет сохраняться. Деплой как в [ORACLE_DEPLOY.md](ORACLE_DEPLOY.md) (разделы 3–5): SSH, Node.js, копирование `server/`, systemd, порт 3000.

Примеры провайдеров (на 2024–2025):

| Провайдер   | Примерно от      | Примечание        |
|------------|-------------------|-------------------|
| Timeweb    | от ~200 ₽/мес     | VPS, есть тарифы   |
| Selectel   | от ~300 ₽/мес     | Облако, VPS        |
| FirstVDS    | от ~150 ₽/мес     | Дешёвый VPS        |
| RuVDS      | от ~200 ₽/мес     | VPS                |
| Beget      | shared + Node.js  | Хостинг с поддержкой Node |

Выберите Ubuntu 22.04, откройте порт 3000 в файрволе/панели, далее — как в ORACLE_DEPLOY (установка Node, `npm install`, systemd, `JWT_SECRET`).

---

## 3. Зарубежные бесплатные платформы (могут требовать карту или VPN)

- **Render** (render.com) — бесплатный Web Service; диск эфемерный, после рестарта SQLite обнулится. Подходит только для проверки API. Для постоянных данных — нужна платная подписка с persistent disk или внешняя БД.
- **Railway** (railway.app) — бесплатные кредиты; для постоянного SQLite нужен Volume (платно). Может потребоваться карта.
- **Koyeb** (koyeb.com) — есть free tier; уточняйте на сайте лимиты и наличие диска.
- **Fly.io** — см. [FLY_DEPLOY.md](FLY_DEPLOY.md); для создания приложения сейчас нужна карта (в РФ возможны ограничения оплаты).

Если решите использовать любую из этих платформ — общая схема та же: Node.js, порт из переменной окружения (например `PORT`), для SQLite — постоянный том или смириться с эфемерным хранилищем на бесплатных тарифах.

---

## 4. Итоговая рекомендация для РФ

- **Без затрат:** поднять сервер **на своём ПК** и дать доступ через **Tailscale** (Вариант B) или через проброс порта + динамический DNS (Вариант A).
- **Небольшая плата, стабильный доступ из интернета:** **российский VPS** (Timeweb, Selectel, FirstVDS и т.п.) и деплой по инструкции типа ORACLE_DEPLOY (Node.js + systemd + порт 3000).

Во всех случаях в клиентах указываете один и тот же URL API (например `https://ваш-сервер...` или `http://Tailscale-IP:3000`) и включаете режим API — синхронизация между устройствами будет идти через этот сервер.
