<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–£—á—ë—Ç –∫–æ—Ä–æ–≤ ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª</title>
  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ç–∏–ª–µ–π -->
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <!-- –≠–∫—Ä–∞–Ω –º–µ–Ω—é -->
  <div id="menu-screen" class="screen active">
    <h1>–ú–µ–Ω—é</h1>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å—Ç–∞–¥–∞ -->
    <div class="herd-stats">
      <div class="stat-item">
        <div class="stat-value" id="totalCows">0</div>
        <div class="stat-label">–í—Å–µ–≥–æ –∫–æ—Ä–æ–≤</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="pregnantCows">0</div>
        <div class="stat-label">–°—Ç–µ–ª—å–Ω—ã—Ö</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="dryCows">0</div>
        <div class="stat-label">–í —Å—É—Ö–æ—Å—Ç–æ–µ</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="inseminatedCows">0</div>
        <div class="stat-label">–û—Å–µ–º–µ–Ω—ë–Ω–Ω—ã—Ö</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="cullCows">0</div>
        <div class="stat-label">–ù–∞ –±—Ä–∞–∫</div>
      </div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
    <div class="action-buttons">
      <button onclick="navigate('add')" class="action-btn">
        <span>‚ûï</span>
        <span>–î–æ–±–∞–≤–∏—Ç—å –∂–∏–≤–æ—Ç–Ω–æ–µ</span>
      </button>
      <button onclick="navigate('insemination')" class="action-btn">
        <span>üêÑ</span>
        <span>–í–≤–µ—Å—Ç–∏ –æ—Å–µ–º–µ–Ω–µ–Ω–∏–µ</span>
      </button>
      <button onclick="exportToExcel()" class="action-btn">
        <span>üì§</span>
        <span>–≠–∫—Å–ø–æ—Ä—Ç –≤ Excel</span>
      </button>
      <button onclick="downloadTemplate()" class="action-btn">
        <span>üìã</span>
        <span>–®–∞–±–ª–æ–Ω –∏–º–ø–æ—Ä—Ç–∞</span>
      </button>
      <button onclick="document.getElementById('importFile').click()" class="action-btn">
        <span>üì•</span>
        <span>–ò–º–ø–æ—Ä—Ç –∏–∑ Excel</span>
      </button>
      <input type="file" id="importFile" accept=".csv" style="display: none;" onchange="importFromCSV(event)">
      <button onclick="navigate('view')" class="action-btn">
        <span>üìã</span>
        <span>–ü—Ä–æ—Å–º–æ—Ç—Ä –æ–ø–∏—Å–∏</span>
      </button>
      <button onclick="cleanAllEntries()" class="action-btn" style="background-color: #ffc107;">
        <span>üßπ</span>
        <span>–û—á–∏—Å—Ç–∏—Ç—å –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</span>
      </button>
      <button onclick="if(confirm('–í–ù–ò–ú–ê–ù–ò–ï! –≠—Ç–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?')) forceCleanDamagedEntries()" class="action-btn" style="background-color: #dc3545;">
        <span>üóëÔ∏è</span>
        <span>–£–¥–∞–ª–∏—Ç—å –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏</span>
      </button>
    </div>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –≤–≤–æ–¥–∞ –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è -->
  <div id="insemination-screen" class="screen">
    <h1>‚ûï –í–≤–µ—Å—Ç–∏ –æ—Å–µ–º–µ–Ω–µ–Ω–∏–µ</h1>
    <form class="form" onsubmit="addInseminationEntry(); return false;">
      <label for="cattleIdInsemInput">–ù–æ–º–µ—Ä –∫–æ—Ä–æ–≤—ã *</label>
      <div class="autocomplete">
        <input type="text" id="cattleIdInsemInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞" required />
        <ul id="cattleIdInsemList" class="autocomplete-list"></ul>
        <select id="cattleIdInsem" style="display: none;">
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ—Ä–æ–≤—É</option>
        </select>
      </div>

      <label for="inseminationDateInsem">–î–∞—Ç–∞ –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è</label>
      <input type="date" id="inseminationDateInsem" />

      <label for="attemptNumberInsem">–ù–æ–º–µ—Ä –ø–æ–ø—ã—Ç–∫–∏</label>
      <input type="number" id="attemptNumberInsem" value="1" />

      <label for="bullInsem">–ë—ã–∫</label>
      <input type="text" id="bullInsem" />

      <label for="inseminatorInsem">–û—Å–µ–º–µ–Ω–∏—Ç–µ–ª—å</label>
      <input type="text" id="inseminatorInsem" />

      <label for="codeInsem">–ö–æ–¥ –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è</label>
      <input type="text" id="codeInsem" />

      <div class="form-actions">
        <button type="button" onclick="navigate('menu')" id="cancelButtonInsem">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit" id="saveButtonInsem">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </form>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
  <div id="add-screen" class="screen">
    <h1 id="addScreenTitle">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–æ—Ä–æ–≤—É</h1>
    <form class="form" onsubmit="saveCurrentEntry(); return false;">
      <label for="cattleId">–ù–æ–º–µ—Ä –∫–æ—Ä–æ–≤—ã *</label>
      <input type="text" id="cattleId" required />

      <label for="nickname">–ö–ª–∏—á–∫–∞</label>
      <input type="text" id="nickname" />

      <label for="birthDate">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
      <input type="date" id="birthDate" />

      <label for="lactation">–õ–∞–∫—Ç–∞—Ü–∏—è</label>
      <input type="number" id="lactation" value="1" />

      <label for="calvingDate">–î–∞—Ç–∞ –æ—Ç—ë–ª–∞</label>
      <input type="date" id="calvingDate" />

      <label for="inseminationDate">–î–∞—Ç–∞ –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è</label>
      <input type="date" id="inseminationDate" />

      <label for="attemptNumber">–ù–æ–º–µ—Ä –ø–æ–ø—ã—Ç–∫–∏</label>
      <input type="number" id="attemptNumber" value="1" />

      <label for="bull">–ë—ã–∫</label>
      <input type="text" id="bull" />

      <label for="inseminator">–û—Å–µ–º–µ–Ω–∏—Ç–µ–ª—å</label>
      <input type="text" id="inseminator" />

      <label for="code">–ö–æ–¥</label>
      <input type="text" id="code" />

      <label for="status">–°—Ç–∞—Ç—É—Å</label>
      <select id="status">
        <option>–û—Ö–æ—Ç–∞</option>
        <option>–°—É—Ö–æ—Å—Ç–æ–π</option>
        <option>–û—Ç—ë–ª</option>
        <option>–°—É—Ö–æ—Å—Ç–æ–π (–≤—ã–Ω—É–∂–¥.)</option>
        <option>–û—Ç—ë–ª (–≤—ã–Ω—É–∂–¥.)</option>
      </select>

      <label for="exitDate">–î–∞—Ç–∞ –≤—ã–±—ã—Ç–∏—è</label>
      <input type="date" id="exitDate" />

      <label for="dryStartDate">–ù–∞—á–∞–ª–æ —Å—É—Ö–æ—Å—Ç–æ—è</label>
      <input type="date" id="dryStartDate" />

      <label for="vwp">–í–°–ü (–¥–Ω–∏)</label>
      <input type="number" id="vwp" value="60" />

      <label for="protocolName">–ü—Ä–æ—Ç–æ–∫–æ–ª</label>
      <input type="text" id="protocolName" />

      <label for="protocolStartDate">–ù–∞—á–∞–ª–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞</label>
      <input type="date" id="protocolStartDate" />

      <label for="note">–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ</label>
      <textarea id="note"></textarea>

      <div class="form-actions">
        <button type="button" onclick="cancelEdit()" id="cancelButton">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit" id="saveButton">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </form>

    <div id="entriesList"></div>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–ø–∏—Å–µ–π -->
  <div id="view-screen" class="screen">
    <h1>üìã –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø–∏—Å–µ–π</h1>
    <div id="viewEntriesList"></div>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ -->
  <div id="view-cow-screen" class="screen">
    <h1>üîç –ü—Ä–æ—Å–º–æ—Ç—Ä –∂–∏–≤–æ—Ç–Ω–æ–≥–æ</h1>
    <div id="viewCowCard"></div>
    <button onclick="navigate('view')" class="back-button">–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ -->
  <div id="sync-screen" class="screen">
    <h1>üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</h1>
    <div class="sync-controls">
      <button onclick="exportData()">–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
      <label for="importFile">–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
        <input type="file" id="importFile" accept=".json" onchange="importData()" />
      </label>
      <div id="syncStatus" class="sync-status"></div>
    </div>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ -->
  <script src="js/utils.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/ui-helpers.js"></script>
  <script src="js/cow-operations.js"></script>
  <script src="js/voice-handler.js"></script>
  <script src="js/app.js"></script>
  <script src="js/menu.js"></script>
  <script src="js/sync.js"></script>
  <script src="js/export.js"></script>
  <script src="js/insemination.js"></script>
  <script src="js/view-cow.js"></script>
</body>
</html>