<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–£—á—ë—Ç –∫–æ—Ä–æ–≤ ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#3d6eb5" />
  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ç–∏–ª–µ–π -->
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/print.css" media="print" />
</head>
<body>
  <div id="toast-container" class="toast-container" aria-live="polite"></div>
  <div id="offline-indicator" class="offline-indicator" role="status" aria-live="polite" aria-label="–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É" hidden>üì¥ –ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É</div>
  <header id="app-header" class="app-header" aria-label="–®–∞–ø–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è">
    <span id="app-version-header" class="app-version-header"></span>
    <button type="button" id="app-header-connection-btn" class="app-header-connection-btn" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞: –∞–¥—Ä–µ—Å, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ" aria-label="–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É. –ù–∞–∂–º–∏—Ç–µ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏." onclick="typeof window.navigate === 'function' && window.navigate('sync')">
      <span id="connection-indicator-global" class="connection-indicator connection-indicator--disconnected" role="status" aria-hidden="true"></span>
    </button>
  </header>
  <!-- –®–∞–ø–∫–∞ –¥–ª—è –ø–µ—á–∞—Ç–∏ (–≤ —Å—Ç–∏–ª–µ —Ñ–∏—Ä–º–µ–Ω–Ω–æ–≥–æ –±–ª–∞–Ω–∫–∞ –ú–ö ¬´–ì–µ–Ω–µ—Ç–∏–∫–∞¬ª) -->
  <div id="print-header" class="print-header" aria-hidden="true">
    <div class="print-header-strip"></div>
    <div class="print-header-body">
      <div class="print-header-milk"></div>
      <div class="print-header-content">
        <div class="print-logo">
          <img src="icons/icon.svg" alt="" width="64" height="64" class="print-logo-img" />
          <span class="print-company-name">–ú–æ–ª–æ—á–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è ¬´–ì–µ–Ω–µ—Ç–∏–∫–∞¬ª</span>
        </div>
        <div class="print-details">
          <p>–û–û–û –ú–æ–ª–æ—á–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è ¬´–ì–µ–Ω–µ—Ç–∏–∫–∞¬ª</p>
          <p>603137, –≥. –ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥, —É–ª. 40 –ª–µ—Ç –ü–æ–±–µ–¥—ã, –¥.&nbsp;17</p>
          <p>—Ç–µ–ª. 8 (831) 466 17 78, e-mail: info@mkg-nn.ru</p>
        </div>
      </div>
      <div class="print-doc-title" id="print-doc-title">–û–ø–∏—Å—å —Å—Ç–∞–¥–∞</div>
      <div class="print-doc-date" id="print-doc-date"></div>
    </div>
  </div>

  <!-- ========== –í—Ö–æ–¥ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ) ========== -->
  <div id="auth-screen" class="screen active">
    <h1>–í—Ö–æ–¥</h1>
    <div id="auth-form-container" class="auth-form-container">
      <p id="auth-api-hint" class="auth-api-hint" style="display: none;">–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º —Å —Å–µ—Ä–≤–µ—Ä–∞ –≤–æ–π–¥–∏—Ç–µ –ø–æ –ª–æ–≥–∏–Ω—É –∏ –ø–∞—Ä–æ–ª—é –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å (–ø–µ—Ä–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è).</p>
      <form id="authLoginForm" class="form">
        <label for="authUsernameSelect">–í—ã–±—Ä–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</label>
        <select id="authUsernameSelect" class="auth-username-select" aria-label="–í—ã–±—Ä–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Å–ø–∏—Å–∫–∞">
          <option value="">‚Äî –í—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞ ‚Äî</option>
        </select>
        <label for="authUsername">–õ–æ–≥–∏–Ω</label>
        <input type="text" id="authUsername" required autocomplete="username" />
        <label for="authPassword">–ü–∞—Ä–æ–ª—å</label>
        <input type="password" id="authPassword" autocomplete="current-password" required />
        <div class="form-actions">
          <button type="submit">–í–æ–π—Ç–∏</button>
          <button type="button" onclick="showAuthRegister()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
          <button type="button" id="auth-skip-btn" class="small-btn" onclick="typeof window.skipAuth === 'function' && window.skipAuth()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –±–µ–∑ –≤—Ö–æ–¥–∞</button>
        </div>
      </form>
      <form id="authRegisterForm" class="form" style="display: none;">
        <label for="regUsername">–õ–æ–≥–∏–Ω</label>
        <input type="text" id="regUsername" required autocomplete="username" />
        <span id="authUsernameCheck" class="auth-username-check" aria-live="polite"></span>
        <label for="regPassword">–ü–∞—Ä–æ–ª—å</label>
        <input type="password" id="regPassword" autocomplete="new-password" required />
        <label for="regRole">–†–æ–ª—å</label>
        <select id="regRole">
          <option value="admin" selected>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
          <option value="operator">–û–ø–µ—Ä–∞—Ç–æ—Ä</option>
          <option value="viewer">–¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä</option>
        </select>
        <div class="form-actions">
          <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
          <button type="button" onclick="showAuthLogin()">–ù–∞–∑–∞–¥ –∫ –≤—Ö–æ–¥—É</button>
        </div>
      </form>
      <p id="auth-user-data-hint" class="auth-user-data-hint" style="display: none;">–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –ü–æ—Å–ª–µ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤–æ–π–¥–∏—Ç–µ —Å —Ç–µ–º –∂–µ –ª–æ–≥–∏–Ω–æ–º –∏ –ø–∞—Ä–æ–ª–µ–º.</p>
    </div>
  </div>

  <!-- ========== –ú–µ–Ω—é (–≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω) ========== -->
  <div id="menu-screen" class="screen">
    <div class="menu-branding" aria-hidden="false">
      <img src="icons/icon.svg" alt="–ú–æ–ª–æ—á–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è –ì–µ–Ω–µ—Ç–∏–∫–∞" class="menu-branding-logo" width="64" height="64" />
      <span class="menu-branding-text">–ú–æ–ª–æ—á–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è ¬´–ì–µ–Ω–µ—Ç–∏–∫–∞¬ª</span>
    </div>
    <p id="app-version" class="app-version" data-default-version="1.4.4" aria-label="–í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"></p>
    <h1>–ú–µ–Ω—é</h1>
    <div id="auth-bar" class="auth-bar" style="display: none;">
      <span id="authBarUser"></span>
      <button type="button" class="small-btn" onclick="handleLogout()">–í—ã–π—Ç–∏</button>
    </div>

    <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –æ–±—ä–µ–∫—Ç–æ–≤ (–±–∞–∑) -->
    <div id="object-switcher" class="object-switcher">
      <label for="currentObjectSelect">–û–±—ä–µ–∫—Ç:</label>
      <select id="currentObjectSelect" class="object-select" title="–í—ã–±–µ—Ä–∏—Ç–µ –±–∞–∑—É –¥–ª—è —Ä–∞–±–æ—Ç—ã"></select>
      <button type="button" class="small-btn" id="editObjectBtn" title="–ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–∑—ã" onclick="typeof handleEditObjectClick === 'function' && handleEditObjectClick()">–ò–∑–º–µ–Ω–∏—Ç—å</button>
      <button type="button" class="small-btn" id="deleteObjectBtn" title="–£–¥–∞–ª–∏—Ç—å –±–∞–∑—É" onclick="typeof handleDeleteObjectClick === 'function' && handleDeleteObjectClick()">–£–¥–∞–ª–∏—Ç—å</button>
      <button type="button" class="small-btn add-object-btn" id="addObjectBtn" title="–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –±–∞–∑—É" onclick="typeof handleAddObjectClick === 'function' && handleAddObjectClick()">+ –î–æ–±–∞–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç</button>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å—Ç–∞–¥–∞ -->
    <div class="herd-stats">
      <div class="stat-item">
        <div class="stat-value" id="totalCows">0</div>
        <div class="stat-label">–í—Å–µ–≥–æ –∫–æ—Ä–æ–≤</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="pregnantCows">0</div>
        <div class="stat-label">–°—Ç–µ–ª—å–Ω—ã—Ö</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="dryCows">0</div>
        <div class="stat-label">–í —Å—É—Ö–æ—Å—Ç–æ–µ</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="inseminatedCows">0</div>
        <div class="stat-label">–û—Å–µ–º–µ–Ω—ë–Ω–Ω—ã—Ö</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="cullCows">0</div>
        <div class="stat-label">–ù–∞ –±—Ä–∞–∫</div>
      </div>
    </div>
    <div class="herd-stats herd-stats-percents" id="herdStatsPercentsRow" aria-hidden="true">
      <div class="stat-item"><div class="stat-value" id="pregnantCowsPct">0%</div><div class="stat-label">–°—Ç–µ–ª—å–Ω—ã—Ö</div></div>
      <div class="stat-item"><div class="stat-value" id="dryCowsPct">0%</div><div class="stat-label">–í —Å—É—Ö–æ—Å—Ç–æ–µ</div></div>
      <div class="stat-item"><div class="stat-value" id="inseminatedCowsPct">0%</div><div class="stat-label">–û—Å–µ–º–µ–Ω—ë–Ω–Ω—ã—Ö</div></div>
      <div class="stat-item"><div class="stat-value" id="cullCowsPct">0%</div><div class="stat-label">–ù–∞ –±—Ä–∞–∫</div></div>
      <div class="stat-item"><div class="stat-value" id="notInseminatedCowsPct">0%</div><div class="stat-label">–ù–µ –æ—Å–µ–º–µ–Ω–µ–Ω–Ω—ã–µ</div></div>
    </div>

    <!-- –ö—Ä–∞—Ç–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div id="menu-notifications" class="menu-notifications">
      <button type="button" class="menu-notifications-toggle" id="menuNotificationsToggle" aria-expanded="false">
        <span>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
        <span class="menu-notifications-badge" id="menuNotificationsBadge" style="display: none;"></span>
      </button>
      <div class="menu-notifications-body" id="menuNotificationsBody" hidden></div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ –≥—Ä—É–ø–ø–∞–º (–≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Äî –æ–¥–Ω–∞ –∫–Ω–æ–ø–∫–∞ –Ω–∞ –≥—Ä—É–ø–ø—É) -->
    <div class="action-buttons">
      <div class="menu-section">
        <button onclick="navigateToSubmenu('data')" class="action-btn menu-group-btn">
          <span>üìÅ</span>
          <span>–†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏</span>
        </button>
      </div>
      <div class="menu-section">
        <button onclick="navigateToSubmenu('actions')" class="action-btn menu-group-btn">
          <span>üêÑ</span>
          <span>–î–µ–π—Å—Ç–≤–∏—è</span>
        </button>
      </div>
      <div class="menu-section">
        <button onclick="navigateToSubmenu('analytics')" class="action-btn menu-group-btn">
          <span>üìä</span>
          <span>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span>
        </button>
      </div>
      <div class="menu-section">
        <button onclick="navigateToSubmenu('notifications')" class="action-btn menu-group-btn">
          <span>üîî</span>
          <span>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –ø–ª–∞–Ω—ã</span>
          <span class="menu-notifications-button-badge" id="menuNotificationsButtonBadge" style="display: none;"></span>
        </button>
      </div>
      <div class="menu-section">
        <button onclick="navigateToSubmenu('settings')" class="action-btn menu-group-btn">
          <span>‚öôÔ∏è</span>
          <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
        </button>
      </div>
    </div>
    <input type="file" id="importFile" accept=".csv,.xlsx" style="display: none;" onchange="handleImportFile(event)">
  </div>

  <!-- ========== –ü–æ–¥–º–µ–Ω—é –∏ —Ñ–æ—Ä–º—ã –¥–µ–π—Å—Ç–≤–∏–π (–æ—Å–µ–º–µ–Ω–µ–Ω–∏–µ, –æ—Ç—ë–ª, –£–ó–ò) ========== -->
  <div id="submenu-screen" class="screen">
    <h1 id="submenu-title">–ü–æ–¥–º–µ–Ω—é</h1>
    <div id="submenu-buttons" class="menu-section-buttons action-buttons-inner"></div>
    <button type="button" onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –≤–≤–æ–¥–∞ –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è -->
  <div id="insemination-screen" class="screen">
    <h1>‚ûï –í–≤–µ—Å—Ç–∏ –æ—Å–µ–º–µ–Ω–µ–Ω–∏–µ</h1>
    <form class="form" onsubmit="addInseminationEntry(); return false;">
      <label for="cattleIdInsemInput">–ù–æ–º–µ—Ä –∫–æ—Ä–æ–≤—ã *</label>
      <div class="autocomplete">
        <input type="text" id="cattleIdInsemInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞" required />
        <ul id="cattleIdInsemList" class="autocomplete-list"></ul>
        <select id="cattleIdInsem" style="display: none;">
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ—Ä–æ–≤—É</option>
        </select>
      </div>

      <label for="inseminationDateInsem">–î–∞—Ç–∞ –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è</label>
      <input type="date" id="inseminationDateInsem" />

      <label for="attemptNumberInsem">–ù–æ–º–µ—Ä –ø–æ–ø—ã—Ç–∫–∏</label>
      <input type="number" id="attemptNumberInsem" value="1" />

      <label for="bullInsem">–ë—ã–∫</label>
      <input type="text" id="bullInsem" />

      <label for="inseminatorInsem">–¢–µ—Ö–Ω–∏–∫ –ò–û</label>
      <input type="text" id="inseminatorInsem" />

      <label for="codeInsem">–ö–æ–¥ –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è</label>
      <input type="text" id="codeInsem" />

      <div class="form-actions">
        <button type="button" onclick="navigate('menu')" id="cancelButtonInsem">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit" id="saveButtonInsem">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </form>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω: –ó–∞–ø—É—Å–∫ (–Ω–∞—á–∞–ª–æ —Å—É—Ö–æ—Å—Ç–æ—è) -->
  <div id="dry-screen" class="screen">
    <h1>üêÑ –ó–∞–ø—É—Å–∫ (–Ω–∞—á–∞–ª–æ —Å—É—Ö–æ—Å—Ç–æ—è)</h1>
    <form class="form" onsubmit="saveDryRunEntry(); return false;">
      <label for="cattleIdDryInput">–ù–æ–º–µ—Ä –∫–æ—Ä–æ–≤—ã *</label>
      <div class="autocomplete">
        <input type="text" id="cattleIdDryInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞" required />
        <ul id="cattleIdDryList" class="autocomplete-list"></ul>
      </div>
      <label for="dryStartDateInput">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —Å—É—Ö–æ—Å—Ç–æ—è</label>
      <input type="date" id="dryStartDateInput" />
      <div class="form-actions">
        <button type="button" onclick="navigate('menu')">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </form>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω: –û—Ç–µ–ª -->
  <div id="calving-screen" class="screen">
    <h1>üêÑ –û—Ç–µ–ª</h1>
    <form class="form" onsubmit="saveCalvingEntry(); return false;">
      <label for="cattleIdCalvingInput">–ù–æ–º–µ—Ä –∫–æ—Ä–æ–≤—ã *</label>
      <div class="autocomplete">
        <input type="text" id="cattleIdCalvingInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞" required />
        <ul id="cattleIdCalvingList" class="autocomplete-list"></ul>
      </div>
      <label for="calvingDateInput">–î–∞—Ç–∞ –æ—Ç—ë–ª–∞</label>
      <input type="date" id="calvingDateInput" />
      <div class="form-actions">
        <button type="button" onclick="navigate('menu')">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </form>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω: –ü–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª -->
  <div id="protocol-assign-screen" class="screen">
    <h1>üìã –ü–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª</h1>
    <form class="form" onsubmit="saveProtocolAssignEntry(); return false;">
      <label for="cattleIdProtocolInput">–ù–æ–º–µ—Ä –∫–æ—Ä–æ–≤—ã *</label>
      <div class="autocomplete">
        <input type="text" id="cattleIdProtocolInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞" required />
        <ul id="cattleIdProtocolList" class="autocomplete-list"></ul>
      </div>
      <label for="protocolSelectAssign">–ü—Ä–æ—Ç–æ–∫–æ–ª</label>
      <select id="protocolSelectAssign">
        <option value="">‚Äî –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ç–æ–∫–æ–ª ‚Äî</option>
      </select>
      <label for="protocolStartDateInput">–î–∞—Ç–∞ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª</label>
      <input type="date" id="protocolStartDateInput" />
      <div class="form-actions">
        <button type="button" onclick="navigate('menu')">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </form>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω: –£–ó–ò (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—Ç–µ–ª—å–Ω–æ—Å—Ç—å) -->
  <div id="uzi-screen" class="screen">
    <h1>ü©∫ –£–ó–ò (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—Ç–µ–ª—å–Ω–æ—Å—Ç—å)</h1>
    <form class="form" onsubmit="saveUziEntry(); return false;">
      <label for="cattleIdUziInput">–ù–æ–º–µ—Ä –∫–æ—Ä–æ–≤—ã *</label>
      <div class="autocomplete">
        <input type="text" id="cattleIdUziInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞" required />
        <ul id="cattleIdUziList" class="autocomplete-list"></ul>
      </div>
      <label for="uziDateInput">–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Å—Ç–µ–ª—å–Ω–æ—Å—Ç—å</label>
      <input type="date" id="uziDateInput" />
      <label for="uziResultSelect">–†–µ–∑—É–ª—å—Ç–∞—Ç</label>
      <select id="uziResultSelect">
        <option value="">‚Äî –í—ã–±–µ—Ä–∏—Ç–µ ‚Äî</option>
        <option value="–ù–µ —Å—Ç–µ–ª—å–Ω–∞—è">–ù–µ —Å—Ç–µ–ª—å–Ω–∞—è</option>
        <option value="–°—Ç–µ–ª—å–Ω–∞—è">–°—Ç–µ–ª—å–Ω–∞—è</option>
      </select>
      <label for="uziSpecialistInput">–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç</label>
      <input type="text" id="uziSpecialistInput" placeholder="–ö—Ç–æ –ø—Ä–æ–≤–æ–¥–∏–ª –£–ó–ò" />
      <label for="uziDaysFromInsemination">–î–Ω–µ–π –æ—Ç –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è</label>
      <input type="text" id="uziDaysFromInsemination" readonly placeholder="‚Äî" style="background: var(--color-bg-elevated);" />
      <div class="form-actions">
        <button type="button" onclick="navigate('menu')">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </form>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- ========== –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∂–∏–≤–æ—Ç–Ω–æ–≥–æ ========== -->
  <div id="add-screen" class="screen">
    <h1 id="addScreenTitle" aria-live="polite">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–æ—Ä–æ–≤—É</h1>
    <form class="form form-cow-editor-wrap" onsubmit="saveCurrentEntry(); return false;">
      <fieldset class="form-cow-section">
        <legend>–û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</legend>
        <div class="form-cow-editor">
          <label for="cattleId">–ù–æ–º–µ—Ä –∫–æ—Ä–æ–≤—ã *</label>
          <input type="text" id="cattleId" required />
          <label for="nickname">–ö–ª–∏—á–∫–∞</label>
          <input type="text" id="nickname" />
          <label for="group">–ì—Ä—É–ø–ø–∞</label>
          <input type="text" id="group" placeholder="–ú–µ—Å—Ç–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è" />
          <label for="birthDate">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
          <input type="date" id="birthDate" />
          <label for="lactation">–õ–∞–∫—Ç–∞—Ü–∏—è</label>
          <input type="number" id="lactation" min="1" max="20" placeholder="‚Äî" />
        </div>
      </fieldset>
      <fieldset class="form-cow-section">
        <legend>–û—Ç–µ–ª –∏ –æ—Å–µ–º–µ–Ω–µ–Ω–∏–µ</legend>
        <div class="form-cow-editor">
          <label for="calvingDate">–î–∞—Ç–∞ –æ—Ç—ë–ª–∞</label>
          <input type="date" id="calvingDate" />
          <label for="inseminationDate">–î–∞—Ç–∞ –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è</label>
          <input type="date" id="inseminationDate" />
          <label for="attemptNumber">–ù–æ–º–µ—Ä –ø–æ–ø—ã—Ç–∫–∏</label>
          <input type="number" id="attemptNumber" value="1" />
          <label for="bull">–ë—ã–∫</label>
          <input type="text" id="bull" />
          <label for="inseminator">–¢–µ—Ö–Ω–∏–∫ –ò–û</label>
          <input type="text" id="inseminator" />
          <label for="code">–ö–æ–¥</label>
          <input type="text" id="code" />
          <label for="status">–°—Ç–∞—Ç—É—Å</label>
          <select id="status">
            <option value="">‚Äî</option>
            <option>–û—Å–µ–º–µ–Ω–µ–Ω–Ω–∞—è</option>
            <option>–•–æ–ª–æ—Å—Ç–∞—è</option>
            <option>–°—Ç–µ–ª—å–Ω–∞—è</option>
            <option>–°—É—Ö–æ—Å—Ç–æ–π</option>
            <option>–û—Ç—ë–ª</option>
            <option>–ë—Ä–∞–∫</option>
          </select>
        </div>
      </fieldset>
      <fieldset class="form-cow-section">
        <legend>–°—É—Ö–æ—Å—Ç–æ–π –∏ –ø—Ä–æ—Ç–æ–∫–æ–ª</legend>
        <div class="form-cow-editor">
          <label for="dryStartDate">–ù–∞—á–∞–ª–æ —Å—É—Ö–æ—Å—Ç–æ—è</label>
          <input type="date" id="dryStartDate" />
          <label for="vwp">–ü–î–û (–¥–Ω–µ–π –æ—Ç –æ—Ç—ë–ª–∞ –¥–æ 1-–≥–æ –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è)</label>
          <input type="text" id="vwp" readonly placeholder="‚Äî" title="–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏" />
          <label for="protocolName">–ü—Ä–æ—Ç–æ–∫–æ–ª</label>
          <input type="text" id="protocolName" />
          <label for="protocolStartDate">–ù–∞—á–∞–ª–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞</label>
          <input type="date" id="protocolStartDate" />
        </div>
      </fieldset>
      <fieldset class="form-cow-section">
        <legend>–í—ã–±—ã—Ç–∏–µ –∏ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ</legend>
        <div class="form-cow-editor">
          <label for="exitDate">–î–∞—Ç–∞ –≤—ã–±—ã—Ç–∏—è</label>
          <input type="date" id="exitDate" />
          <label for="note">–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ</label>
          <textarea id="note"></textarea>
        </div>
      </fieldset>
      <div class="form-actions">
        <button type="button" onclick="clearForm();" id="clearFormButton" aria-label="–û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É" style="display: none;">–û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É</button>
        <button type="button" onclick="cancelEdit()" id="cancelButton" aria-label="–û—Ç–º–µ–Ω–∞">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit" id="saveButton" aria-label="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </form>

    <button onclick="navigate('menu')" class="back-button" aria-label="–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- ========== –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –∏ –∫–∞—Ä—Ç–æ—á–∫–∞ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ ========== -->
  <div id="view-screen" class="screen view-screen">
    <!-- –í–µ—Ä—Ö–Ω–∏–π –±–ª–æ–∫: –∑–∞–∫—Ä–µ–ø–ª—ë–Ω –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ —Å–ø–∏—Å–∫–∞ -->
    <div class="view-screen-header">
      <button onclick="navigate('menu')" class="back-button view-screen-back">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
      <h1>üìã –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö</h1>
      <button type="button" class="small-btn" id="viewEditorModeBtn" title="–í–∫–ª—é—á–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–µ–π –ø—Ä—è–º–æ –≤ —Å–ø–∏—Å–∫–µ">‚úé –†–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞</button>
      <button type="button" class="small-btn" id="viewFieldsSettingsBtn">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–µ–π</button>
      <div id="search-filter-container" class="search-filter-container"></div>
      <div id="viewBulkActions" class="view-bulk-actions"></div>
    </div>
    <div id="viewEntriesList" class="view-entries-wrapper"></div>
    <button type="button" id="viewScrollToTopBtn" class="scroll-to-top-btn" aria-label="–í–≤–µ—Ä—Ö" style="display: none;">‚Üë –í–≤–µ—Ä—Ö</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ -->
  <div id="view-cow-screen" class="screen view-cow-screen">
    <div class="view-cow-header">
      <button onclick="navigate('view')" class="back-button view-cow-back">–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</button>
      <h1>üîç –ü—Ä–æ—Å–º–æ—Ç—Ä –∂–∏–≤–æ—Ç–Ω–æ–≥–æ</h1>
    </div>
    <div id="viewCowCard" class="view-cow-body"></div>
  </div>

  <!-- –≠–∫—Ä–∞–Ω ¬´–í—Å–µ –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è¬ª -->
  <div id="all-inseminations-screen" class="screen">
    <div class="view-screen-header">
      <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
      <h1>üìë –í—Å–µ –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è</h1>
      <div id="allInseminationsFilterContainer" class="search-filter-container"></div>
    </div>
    <div id="allInseminationsList" class="view-entries-wrapper" style="padding: 12px; overflow: auto;"></div>
  </div>

  <!-- ========== –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –ø–ª–∞–Ω—ã, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ ========== -->
  <div id="notifications-screen" class="screen">
    <h1>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –ø–ª–∞–Ω—ã</h1>
    <div id="notification-center-container"></div>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á -->
  <div id="tasks-screen" class="screen">
    <h1>üìã –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á</h1>
    <div id="tasksScreenContainer" class="tasks-screen-container"></div>
    <button type="button" onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ -->
  <div id="analytics-screen" class="screen">
    <h1>üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h1>
    <div class="analytics-controls">
      <label>–ü–µ—Ä–∏–æ–¥: <select id="analyticsPeriod">
        <option value="month">–ú–µ—Å—è—Ü</option>
        <option value="quarter">–ö–≤–∞—Ä—Ç–∞–ª</option>
        <option value="year">–ì–æ–¥</option>
        <option value="custom">–ü—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–π</option>
      </select></label>
      <span id="analyticsCustomDates" class="analytics-custom-dates" style="display: none;">
        <label>–°: <input type="date" id="analyticsDateFrom"></label>
        <label>–ü–æ: <input type="date" id="analyticsDateTo"></label>
      </span>
      <label>–ü–î–û (–¥–Ω.): <input type="number" id="analyticsPdo" min="0" max="365" value="50" class="analytics-pdo-input"></label>
      <label>–†–∞–∑–±–∏–≤–∫–∞: <select id="analyticsBreakdown">
        <option value="">–ù–µ—Ç</option>
        <option value="group">–ü–æ –≥—Ä—É–ø–ø–∞–º</option>
        <option value="lactation">–ü–æ –ª–∞–∫—Ç–∞—Ü–∏—è–º</option>
        <option value="inseminator">–ü–æ –æ—Å–µ–º–µ–Ω–∞—Ç–æ—Ä–∞–º</option>
        <option value="bull">–ü–æ –±—ã–∫–∞–º</option>
      </select></label>
      <button type="button" id="analyticsRefreshBtn" class="small-btn">–û–±–Ω–æ–≤–∏—Ç—å</button>
    </div>
    <div id="analyticsIndicators" class="analytics-indicators"></div>
    <div id="analyticsBreakdownTable" class="analytics-breakdown-table-wrapper" style="display: none;"></div>
    <div id="analyticsCharts" class="analytics-charts"></div>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ -->
  <div id="interval-analysis-screen" class="screen">
    <h1>üìà –ò–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑</h1>
    <p class="analytics-interval-intro">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –º–µ–∂–¥—É –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è–º–∏ (–≤–Ω—É—Ç—Ä–∏ –æ–¥–Ω–æ–π –ª–∞–∫—Ç–∞—Ü–∏–∏). –¢–µ–ª–∫–∏ ‚Äî –ª–∞–∫—Ç–∞—Ü–∏—è 0.</p>
    <div id="intervalAnalysisFilter" class="analytics-interval-filter"></div>
    <div id="intervalAnalysisTable" class="analytics-interval-table-wrapper"></div>
    <button type="button" onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –î–æ–±–∞–≤–∏—Ç—å / –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç (–±–∞–∑—É) -->
  <div id="addObjectModal" class="view-fields-modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="addObjectModalTitle" hidden data-editing-id="">
    <div class="view-fields-modal-content">
      <div class="view-fields-modal-header">
        <h2 id="addObjectModalTitle">–ù–æ–≤–∞—è –±–∞–∑–∞ (–æ–±—ä–µ–∫—Ç)</h2>
        <button type="button" class="small-btn" id="addObjectModalCloseBtn" aria-label="–ó–∞–∫—Ä—ã—Ç—å">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
      <div class="view-fields-modal-body" style="padding: 1rem 0;">
        <label for="addObjectNameInput">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
        <input type="text" id="addObjectNameInput" class="view-fields-template-input" placeholder="–ù–æ–≤–∞—è –±–∞–∑–∞" value="–ù–æ–≤–∞—è –±–∞–∑–∞" style="width: 100%; margin-top: 0.25rem;" />
      </div>
      <div class="view-fields-actions">
        <button type="button" class="small-btn" id="addObjectModalCancelBtn">–û—Ç–º–µ–Ω–∞</button>
        <button type="button" class="action-btn" id="addObjectModalOkBtn">–î–æ–±–∞–≤–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–µ–π -->
  <div id="viewFieldsSettingsModal" class="view-fields-modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="view-fields-modal-content">
      <div class="view-fields-modal-header">
        <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–µ–π</h2>
        <button type="button" class="small-btn" id="viewFieldsCloseBtn">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
      <div id="viewFieldsList" class="view-fields-list"></div>
      <div class="view-fields-templates-section" id="viewFieldsTemplatesSection">
        <h3 class="view-fields-templates-title">–®–∞–±–ª–æ–Ω—ã</h3>
        <div id="viewFieldsTemplatesList" class="view-fields-templates-list"></div>
        <div class="view-fields-templates-save">
          <input type="text" id="viewFieldsTemplateNameInput" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞" class="view-fields-template-input" />
          <button type="button" class="small-btn" id="viewFieldsSaveTemplateBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â–∏–π –Ω–∞–±–æ—Ä</button>
        </div>
      </div>
      <div class="view-fields-actions">
        <button type="button" class="small-btn" id="viewFieldsResetBtn">–°–±—Ä–æ—Å–∏—Ç—å</button>
        <button type="button" class="action-btn" id="viewFieldsSaveBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π –∫–∞—Ä—Ç–æ—á–∫–∏ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ -->
  <div id="viewCowActionHistoryModal" class="view-fields-modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="view-fields-modal-content">
      <div class="view-fields-modal-header">
        <h2>–ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π</h2>
        <button type="button" class="small-btn" id="viewCowActionHistoryCloseBtn">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
      <div id="viewCowActionHistoryList" class="view-fields-list" style="max-height: 60vh; overflow-y: auto;"></div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ -->
  <div id="exportSettingsModal" class="view-fields-modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="exportSettingsModalTitle">
    <div class="view-fields-modal-content view-fields-modal-content--wide">
      <div class="view-fields-modal-header">
        <h2 id="exportSettingsModalTitle">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞</h2>
        <button type="button" class="small-btn" id="exportSettingsCloseBtn" aria-label="–ó–∞–∫—Ä—ã—Ç—å">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
      <div class="export-settings-body">
        <div class="export-settings-section">
          <h3 class="export-settings-section-title">–ö–æ–ª–æ–Ω–∫–∏ –ª–∏—Å—Ç–∞ ¬´–ö–æ—Ä–æ–≤—ã¬ª</h3>
          <div class="export-settings-actions-row">
            <button type="button" class="small-btn" id="exportSelectAllBtn">–í—ã–±—Ä–∞—Ç—å –≤—Å–µ</button>
            <button type="button" class="small-btn" id="exportResetBtn">–°–±—Ä–æ—Å–∏—Ç—å</button>
          </div>
          <div id="exportFieldsList" class="view-fields-list"></div>
        </div>
        <div class="export-settings-section">
          <h3 class="export-settings-section-title">–®–∞–±–ª–æ–Ω—ã —ç–∫—Å–ø–æ—Ä—Ç–∞</h3>
          <div id="exportTemplatesList" class="view-fields-templates-list"></div>
          <div class="view-fields-templates-save">
            <input type="text" id="exportTemplateNameInput" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞" class="view-fields-template-input" aria-label="–ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞" />
            <button type="button" class="small-btn" id="exportSaveTemplateBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞–±–æ—Ä</button>
          </div>
        </div>
        <div class="export-settings-section">
          <h3 class="export-settings-section-title">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ª–∏—Å—Ç—ã</h3>
          <label class="export-checkbox-label"><input type="checkbox" id="exportIncludeInseminations" checked /> –í–∫–ª—é—á–∏—Ç—å –ª–∏—Å—Ç ¬´–û—Å–µ–º–µ–Ω–µ–Ω–∏—è¬ª</label>
          <label class="export-checkbox-label"><input type="checkbox" id="exportIncludeTasks" /> –í–∫–ª—é—á–∏—Ç—å –ª–∏—Å—Ç ¬´–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á¬ª</label>
          <div id="exportTasksPeriodRow" class="export-tasks-period" style="display: none;">
            <label>–ü–µ—Ä–∏–æ–¥ –∑–∞–¥–∞—á: —Å <input type="date" id="exportTasksDateFrom" aria-label="–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –ø–µ—Ä–∏–æ–¥–∞ –∑–∞–¥–∞—á" /></label>
            <label>–ø–æ <input type="date" id="exportTasksDateTo" aria-label="–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∞ –∑–∞–¥–∞—á" /></label>
          </div>
        </div>
      </div>
      <div class="view-fields-actions">
        <button type="button" class="small-btn" id="exportSettingsCancelBtn">–û—Ç–º–µ–Ω–∞</button>
        <button type="button" class="action-btn" id="exportSettingsExportBtn">–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –º–∞–ø–ø–∏–Ω–≥ —Å—Ç–æ–ª–±—Ü–æ–≤ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ CSV/Excel -->
  <div id="importMappingModal" class="view-fields-modal" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="importMappingModalTitle">
    <div class="view-fields-modal-content view-fields-modal-content--wide">
      <div class="view-fields-modal-header">
        <h2 id="importMappingModalTitle">–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–æ–ª–±—Ü–æ–≤ –∏–º–ø–æ—Ä—Ç–∞</h2>
        <button type="button" class="small-btn" id="importMappingCloseBtn" aria-label="–ó–∞–∫—Ä—ã—Ç—å">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
      <div class="import-mapping-body">
        <div class="import-mapping-section">
          <h3 class="import-mapping-section-title">–°—Ç–æ–ª–±–µ—Ü —Å –Ω–æ–º–µ—Ä–æ–º –∂–∏–≤–æ—Ç–Ω–æ–≥–æ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</h3>
          <select id="importMappingCattleColumn" class="import-mapping-cattle-select" aria-label="–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–æ–ª–±–µ—Ü —Å –Ω–æ–º–µ—Ä–æ–º –∂–∏–≤–æ—Ç–Ω–æ–≥–æ">
            <option value="">‚Äî –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–æ–ª–±–µ—Ü ‚Äî</option>
          </select>
        </div>
        <div class="import-mapping-section">
          <h3 class="import-mapping-section-title">–°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å—Ç–æ–ª–±—Ü–æ–≤ —Å –ø–æ–ª—è–º–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã</h3>
          <div id="importMappingFieldsList" class="import-mapping-fields-list"></div>
        </div>
      </div>
      <div class="view-fields-actions">
        <button type="button" class="small-btn" id="importMappingCloseBtn2">–û—Ç–º–µ–Ω–∞</button>
        <button type="button" class="action-btn" id="importMappingImportBtn">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ -->
  <div id="firstRunHints" class="first-run-hints" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="first-run-hints-content">
      <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</h2>
      <ul>
        <li>–í—ã–±–µ—Ä–∏—Ç–µ –æ–±—ä–µ–∫—Ç (–±–∞–∑—É) –≤–≤–µ—Ä—Ö—É –∏ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –Ω–æ–≤—ã–µ –∫–Ω–æ–ø–∫–æ–π ¬´–î–æ–±–∞–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç¬ª.</li>
        <li>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ –∏ –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è¬ª.</li>
        <li>–†–∞–∑–¥–µ–ª ¬´–†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏¬ª —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö –∏ –∏–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç.</li>
      </ul>
      <div class="first-run-hints-actions">
        <button type="button" class="small-btn" id="firstRunHintsSkip">–ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
        <button type="button" class="action-btn" id="firstRunHintsClose">–ü–æ–Ω—è—Ç–Ω–æ</button>
      </div>
    </div>
  </div>

  <div id="protocols-screen" class="screen">
    <h1>üìã –ü—Ä–æ—Ç–æ–∫–æ–ª—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏</h1>
    <div id="protocols-container"></div>
    <button type="button" onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞: –∞–¥—Ä–µ—Å, –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ) -->
  <div id="sync-screen" class="screen">
    <h1>üîÑ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞</h1>
    <!-- –ë–ª–æ–∫ –∫–æ–≥–¥–∞ —Å–µ—Ä–≤–µ—Ä –µ—â—ë –Ω–µ –ø–æ–¥–∫–ª—é—á—ë–Ω: –∞–¥—Ä–µ—Å –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ -->
    <div id="sync-connect-block" class="sync-server-section">
      <div class="sync-server-url-row">
        <label for="serverApiBaseInput">–ê–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ API</label>
        <input type="text" id="serverApiBaseInput" placeholder="http://localhost:3000 –∏–ª–∏ http://IP:3000" />
        <button type="button" class="action-btn" id="syncSaveServerBtn" onclick="typeof saveServerBaseUrl === 'function' && saveServerBaseUrl()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è</button>
      </div>
      <p class="sync-server-hint">–£—á—ë—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.</p>
      <div class="sync-server-controls sync-connect-row">
        <span id="connection-indicator-sync" class="connection-indicator connection-indicator--disconnected" role="status" aria-label="–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"></span>
      </div>
    </div>
    <!-- –°–µ–∫—Ü–∏—è –¥–ª—è —Ä–µ–∂–∏–º–∞ API: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Å—Ç–∞—Ç—É—Å -->
    <div id="sync-server-block" class="sync-server-section" style="display: none;">
      <div class="sync-server-controls">
        <span id="connection-indicator-sync-connected" class="connection-indicator connection-indicator--disconnected" role="status" aria-label="–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è"></span>
        <button type="button" class="action-btn" onclick="refreshFromServer()">–û–±–Ω–æ–≤–∏—Ç—å —Å —Å–µ—Ä–≤–µ—Ä–∞</button>
        <button type="button" class="small-btn" onclick="typeof disconnectFromServer === 'function' && disconnectFromServer()">–û—Ç–∫–ª—é—á–∏—Ç—å—Å—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞</button>
      </div>
      <div id="syncServerStatus" class="sync-server-status" aria-live="polite"></div>
      <div id="syncProgressBlock" class="sync-progress-block" style="display: none;" aria-live="polite">
        <div class="sync-progress-label" id="syncProgressLabel">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è‚Ä¶</div>
        <div class="sync-progress-bar-wrap"><div class="sync-progress-bar" id="syncProgressBar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div>
        <div class="sync-progress-text" id="syncProgressText">0 / 0</div>
      </div>
      <div class="sync-server-bases">
        <h3>–ë–∞–∑—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ</h3>
        <p class="sync-server-bases-hint">–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –±–∞–∑—É –≤ –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç (—É–∫–∞–∑–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ) –∏–ª–∏ –∑–∞–º–µ–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º.</p>
        <div id="syncServerBasesList" class="sync-server-bases-list" aria-live="polite"></div>
      </div>
    </div>
    <div id="sync-backup-section" class="sync-section">
      <h3>–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
      <p class="sync-section-hint">–°–æ–∑–¥–∞—Ç—å –∫–æ–ø–∏—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ, —ç–∫—Å–ø–æ—Ä—Ç –≤ JSON –∏–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Ñ–∞–π–ª–∞/—Å–ø–∏—Å–∫–∞.</p>
      <div class="sync-backup-actions-row">
        <button type="button" class="action-btn small" onclick="typeof handleCheckForUpdates === 'function' && handleCheckForUpdates()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</button>
      </div>
      <div id="sync-backup-container"></div>
    </div>
    <div id="syncStatus" class="sync-status"></div>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ -->
  <!-- –†–µ–∂–∏–º API: –µ—Å–ª–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–æ—Ö—Ä–∞–Ω—ë–Ω –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞, –≤–∫–ª—é—á–∞–µ–º —Ä–∞–±–æ—Ç—É —Å API -->
  <script>
  (function() {
    try {
      var base = (localStorage.getItem('cattleTracker_apiBase') || '').trim().replace(/\/$/, '');
      if (base) {
        window.CATTLE_TRACKER_USE_API = true;
        window.CATTLE_TRACKER_API_BASE = base;
      }
    } catch (e) {}
  })();
  </script>
  <!-- –í–Ω–µ—à–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏: PapaParse (CSV), Chart.js (–≥—Ä–∞—Ñ–∏–∫–∏), SheetJS (xlsx) -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <!-- –ë–∞–Ω–¥–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Å–æ–±—Ä–∞—Ç—å: npm run build) -->
  <script src="dist/app.js"></script>
  <script>
  (function() {
    function setPrintHeaderDate() {
      var el = document.getElementById('print-doc-date');
      if (el) el.textContent = new Date().toLocaleDateString('ru-RU', { day: 'numeric', month: 'long', year: 'numeric' });
    }
    window.addEventListener('beforeprint', setPrintHeaderDate);
  })();
  </script>
</body>
</html>