<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–£—á—ë—Ç –∫–æ—Ä–æ–≤ ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª</title>
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#3d6eb5" />
  <script>
  (function(){
    try {
      var base = localStorage.getItem('cattleTracker_apiBase');
      if (base && (base = (base + '').trim())) {
        window.CATTLE_TRACKER_USE_API = true;
        window.CATTLE_TRACKER_API_BASE = base.replace(/\/$/, '');
      }
    } catch (e) {}
  })();
  </script>
  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ç–∏–ª–µ–π -->
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/print.css" media="print" />
</head>
<body>
  <div id="toast-container" class="toast-container" aria-live="polite"></div>
  <!-- –®–∞–ø–∫–∞ –¥–ª—è –ø–µ—á–∞—Ç–∏ (–≤ —Å—Ç–∏–ª–µ —Ñ–∏—Ä–º–µ–Ω–Ω–æ–≥–æ –±–ª–∞–Ω–∫–∞ –ú–ö ¬´–ì–µ–Ω–µ—Ç–∏–∫–∞¬ª) -->
  <div id="print-header" class="print-header" aria-hidden="true">
    <div class="print-header-strip"></div>
    <div class="print-header-body">
      <div class="print-header-milk"></div>
      <div class="print-header-content">
        <div class="print-logo">
          <img src="app-icons/logo.png" alt="" width="64" height="64" class="print-logo-img" />
          <span class="print-company-name">–ú–æ–ª–æ—á–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è ¬´–ì–µ–Ω–µ—Ç–∏–∫–∞¬ª</span>
        </div>
        <div class="print-details">
          <p>–û–û–û –ú–æ–ª–æ—á–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è ¬´–ì–µ–Ω–µ—Ç–∏–∫–∞¬ª</p>
          <p>603137, –≥. –ù–∏–∂–Ω–∏–π –ù–æ–≤–≥–æ—Ä–æ–¥, —É–ª. 40 –ª–µ—Ç –ü–æ–±–µ–¥—ã, –¥.&nbsp;17</p>
          <p>—Ç–µ–ª. 8 (831) 466 17 78, e-mail: info@mkg-nn.ru</p>
        </div>
      </div>
      <div class="print-doc-title" id="print-doc-title">–û–ø–∏—Å—å —Å—Ç–∞–¥–∞</div>
      <div class="print-doc-date" id="print-doc-date"></div>
    </div>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ / —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
  <div id="auth-screen" class="screen">
    <h1>–í—Ö–æ–¥</h1>
    <div id="server-url-block" class="server-url-block">
      <label for="serverApiBaseInput">–ê–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞</label>
      <div class="server-url-row">
        <input type="url" id="serverApiBaseInput" placeholder="https://api.example.com" />
        <button type="button" class="small-btn" id="serverUrlSaveBtn" onclick="saveServerBaseUrl()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
      <p id="serverUrlHint" class="server-url-hint">–î–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —É–∫–∞–∂–∏—Ç–µ URL —Å–µ—Ä–≤–µ—Ä–∞ (HTTPS –¥–ª—è –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞).</p>
    </div>
    <div id="auth-form-container" class="auth-form-container">
      <form id="authLoginForm" class="form" onsubmit="handleLogin(event)">
        <label for="authUsername">–õ–æ–≥–∏–Ω</label>
        <input type="text" id="authUsername" required />
        <label for="authPassword">–ü–∞—Ä–æ–ª—å</label>
        <input type="password" id="authPassword" autocomplete="current-password" required />
        <div class="form-actions">
          <button type="submit">–í–æ–π—Ç–∏</button>
          <button type="button" onclick="showAuthRegister()">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
        </div>
      </form>
      <form id="authRegisterForm" class="form" style="display: none;" onsubmit="handleRegister(event)">
        <label for="regUsername">–õ–æ–≥–∏–Ω</label>
        <input type="text" id="regUsername" required />
        <label for="regPassword">–ü–∞—Ä–æ–ª—å</label>
        <input type="password" id="regPassword" autocomplete="new-password" required />
        <label for="regRole">–†–æ–ª—å</label>
        <select id="regRole">
          <option value="operator">–û–ø–µ—Ä–∞—Ç–æ—Ä</option>
          <option value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
          <option value="viewer">–¢–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä</option>
        </select>
        <div class="form-actions">
          <button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
          <button type="button" onclick="showAuthLogin()">–ù–∞–∑–∞–¥ –∫ –≤—Ö–æ–¥—É</button>
        </div>
      </form>
    </div>
    <button type="button" class="back-button" onclick="skipAuth()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –±–µ–∑ –≤—Ö–æ–¥–∞</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –º–µ–Ω—é -->
  <div id="menu-screen" class="screen active">
    <div class="menu-branding" aria-hidden="false">
      <img src="app-icons/logo.png" alt="–ú–æ–ª–æ—á–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è –ì–µ–Ω–µ—Ç–∏–∫–∞" class="menu-branding-logo" width="64" height="64" />
      <span class="menu-branding-text">–ú–æ–ª–æ—á–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è ¬´–ì–µ–Ω–µ—Ç–∏–∫–∞¬ª</span>
    </div>
    <p id="app-version" class="app-version" data-default-version="1.1.4" aria-label="–í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"></p>
    <h1>–ú–µ–Ω—é</h1>
    <div id="auth-bar" class="auth-bar" style="display: none;">
      <span id="authBarUser"></span>
      <button type="button" class="small-btn" onclick="handleLogout()">–í—ã–π—Ç–∏</button>
    </div>

    <!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –æ–±—ä–µ–∫—Ç–æ–≤ (–±–∞–∑) -->
    <div id="object-switcher" class="object-switcher">
      <label for="currentObjectSelect">–û–±—ä–µ–∫—Ç:</label>
      <select id="currentObjectSelect" class="object-select" title="–í—ã–±–µ—Ä–∏—Ç–µ –±–∞–∑—É –¥–ª—è —Ä–∞–±–æ—Ç—ã"></select>
      <button type="button" class="small-btn" id="addObjectBtn" title="–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –±–∞–∑—É">+ –î–æ–±–∞–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç</button>
    </div>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å—Ç–∞–¥–∞ -->
    <div class="herd-stats">
      <div class="stat-item">
        <div class="stat-value" id="totalCows">0</div>
        <div class="stat-label">–í—Å–µ–≥–æ –∫–æ—Ä–æ–≤</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="pregnantCows">0</div>
        <div class="stat-label">–°—Ç–µ–ª—å–Ω—ã—Ö</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="dryCows">0</div>
        <div class="stat-label">–í —Å—É—Ö–æ—Å—Ç–æ–µ</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="inseminatedCows">0</div>
        <div class="stat-label">–û—Å–µ–º–µ–Ω—ë–Ω–Ω—ã—Ö</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="cullCows">0</div>
        <div class="stat-label">–ù–∞ –±—Ä–∞–∫</div>
      </div>
    </div>

    <!-- –ö—Ä–∞—Ç–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div id="menu-notifications" class="menu-notifications">
      <button type="button" class="menu-notifications-toggle" id="menuNotificationsToggle" aria-expanded="false">
        <span>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
        <span class="menu-notifications-badge" id="menuNotificationsBadge" style="display: none;"></span>
      </button>
      <div class="menu-notifications-body" id="menuNotificationsBody" hidden></div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ –≥—Ä—É–ø–ø–∞–º (–≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é ‚Äî –æ–¥–Ω–∞ –∫–Ω–æ–ø–∫–∞ –Ω–∞ –≥—Ä—É–ø–ø—É) -->
    <div class="action-buttons">
      <div class="menu-section">
        <button onclick="navigateToSubmenu('data')" class="action-btn menu-group-btn">
          <span>üìÅ</span>
          <span>–†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏</span>
        </button>
      </div>
      <div class="menu-section">
        <button onclick="navigateToSubmenu('actions')" class="action-btn menu-group-btn">
          <span>üêÑ</span>
          <span>–î–µ–π—Å—Ç–≤–∏—è</span>
        </button>
      </div>
      <div class="menu-section">
        <button onclick="navigateToSubmenu('analytics')" class="action-btn menu-group-btn">
          <span>üìä</span>
          <span>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</span>
        </button>
      </div>
      <div class="menu-section">
        <button onclick="navigateToSubmenu('notifications')" class="action-btn menu-group-btn">
          <span>üîî</span>
          <span>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
          <span class="menu-notifications-button-badge" id="menuNotificationsButtonBadge" style="display: none;"></span>
        </button>
      </div>
      <div class="menu-section">
        <button onclick="navigateToSubmenu('settings')" class="action-btn menu-group-btn">
          <span>‚öôÔ∏è</span>
          <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
        </button>
      </div>
    </div>
    <input type="file" id="importFile" accept=".csv,.xlsx" style="display: none;" onchange="handleImportFile(event)">
  </div>

  <!-- –≠–∫—Ä–∞–Ω –ø–æ–¥–º–µ–Ω—é -->
  <div id="submenu-screen" class="screen">
    <h1 id="submenu-title">–ü–æ–¥–º–µ–Ω—é</h1>
    <div id="submenu-buttons" class="menu-section-buttons action-buttons-inner"></div>
    <button type="button" onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –≤–≤–æ–¥–∞ –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è -->
  <div id="insemination-screen" class="screen">
    <h1>‚ûï –í–≤–µ—Å—Ç–∏ –æ—Å–µ–º–µ–Ω–µ–Ω–∏–µ</h1>
    <form class="form" onsubmit="addInseminationEntry(); return false;">
      <label for="cattleIdInsemInput">–ù–æ–º–µ—Ä –∫–æ—Ä–æ–≤—ã *</label>
      <div class="autocomplete">
        <input type="text" id="cattleIdInsemInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞" required />
        <ul id="cattleIdInsemList" class="autocomplete-list"></ul>
        <select id="cattleIdInsem" style="display: none;">
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ—Ä–æ–≤—É</option>
        </select>
      </div>

      <label for="inseminationDateInsem">–î–∞—Ç–∞ –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è</label>
      <input type="date" id="inseminationDateInsem" />

      <label for="attemptNumberInsem">–ù–æ–º–µ—Ä –ø–æ–ø—ã—Ç–∫–∏</label>
      <input type="number" id="attemptNumberInsem" value="1" />

      <label for="bullInsem">–ë—ã–∫</label>
      <input type="text" id="bullInsem" />

      <label for="inseminatorInsem">–û—Å–µ–º–µ–Ω–∏—Ç–µ–ª—å</label>
      <input type="text" id="inseminatorInsem" />

      <label for="codeInsem">–ö–æ–¥ –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è</label>
      <input type="text" id="codeInsem" />

      <div class="form-actions">
        <button type="button" onclick="navigate('menu')" id="cancelButtonInsem">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit" id="saveButtonInsem">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </form>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω: –ó–∞–ø—É—Å–∫ (–Ω–∞—á–∞–ª–æ —Å—É—Ö–æ—Å—Ç–æ—è) -->
  <div id="dry-screen" class="screen">
    <h1>üêÑ –ó–∞–ø—É—Å–∫ (–Ω–∞—á–∞–ª–æ —Å—É—Ö–æ—Å—Ç–æ—è)</h1>
    <form class="form" onsubmit="saveDryRunEntry(); return false;">
      <label for="cattleIdDryInput">–ù–æ–º–µ—Ä –∫–æ—Ä–æ–≤—ã *</label>
      <div class="autocomplete">
        <input type="text" id="cattleIdDryInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞" required />
        <ul id="cattleIdDryList" class="autocomplete-list"></ul>
      </div>
      <label for="dryStartDateInput">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —Å—É—Ö–æ—Å—Ç–æ—è</label>
      <input type="date" id="dryStartDateInput" />
      <div class="form-actions">
        <button type="button" onclick="navigate('menu')">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </form>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω: –û—Ç–µ–ª -->
  <div id="calving-screen" class="screen">
    <h1>üêÑ –û—Ç–µ–ª</h1>
    <form class="form" onsubmit="saveCalvingEntry(); return false;">
      <label for="cattleIdCalvingInput">–ù–æ–º–µ—Ä –∫–æ—Ä–æ–≤—ã *</label>
      <div class="autocomplete">
        <input type="text" id="cattleIdCalvingInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞" required />
        <ul id="cattleIdCalvingList" class="autocomplete-list"></ul>
      </div>
      <label for="calvingDateInput">–î–∞—Ç–∞ –æ—Ç—ë–ª–∞</label>
      <input type="date" id="calvingDateInput" />
      <div class="form-actions">
        <button type="button" onclick="navigate('menu')">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </form>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω: –ü–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª -->
  <div id="protocol-assign-screen" class="screen">
    <h1>üìã –ü–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª</h1>
    <form class="form" onsubmit="saveProtocolAssignEntry(); return false;">
      <label for="cattleIdProtocolInput">–ù–æ–º–µ—Ä –∫–æ—Ä–æ–≤—ã *</label>
      <div class="autocomplete">
        <input type="text" id="cattleIdProtocolInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞" required />
        <ul id="cattleIdProtocolList" class="autocomplete-list"></ul>
      </div>
      <label for="protocolSelectAssign">–ü—Ä–æ—Ç–æ–∫–æ–ª</label>
      <select id="protocolSelectAssign">
        <option value="">‚Äî –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ç–æ–∫–æ–ª ‚Äî</option>
      </select>
      <label for="protocolStartDateInput">–î–∞—Ç–∞ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª</label>
      <input type="date" id="protocolStartDateInput" />
      <div class="form-actions">
        <button type="button" onclick="navigate('menu')">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </form>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω: –£–ó–ò (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—Ç–µ–ª—å–Ω–æ—Å—Ç—å) -->
  <div id="uzi-screen" class="screen">
    <h1>ü©∫ –£–ó–ò (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—Ç–µ–ª—å–Ω–æ—Å—Ç—å)</h1>
    <form class="form" onsubmit="saveUziEntry(); return false;">
      <label for="cattleIdUziInput">–ù–æ–º–µ—Ä –∫–æ—Ä–æ–≤—ã *</label>
      <div class="autocomplete">
        <input type="text" id="cattleIdUziInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑ —Å–ø–∏—Å–∫–∞" required />
        <ul id="cattleIdUziList" class="autocomplete-list"></ul>
      </div>
      <label for="uziDateInput">–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Å—Ç–µ–ª—å–Ω–æ—Å—Ç—å</label>
      <input type="date" id="uziDateInput" />
      <label for="uziResultSelect">–†–µ–∑—É–ª—å—Ç–∞—Ç</label>
      <select id="uziResultSelect">
        <option value="">‚Äî –í—ã–±–µ—Ä–∏—Ç–µ ‚Äî</option>
        <option value="–ù–µ —Å—Ç–µ–ª—å–Ω–∞—è">–ù–µ —Å—Ç–µ–ª—å–Ω–∞—è</option>
        <option value="–°—Ç–µ–ª—å–Ω–∞—è">–°—Ç–µ–ª—å–Ω–∞—è</option>
      </select>
      <label for="uziSpecialistInput">–°–ø–µ—Ü–∏–∞–ª–∏—Å—Ç</label>
      <input type="text" id="uziSpecialistInput" placeholder="–ö—Ç–æ –ø—Ä–æ–≤–æ–¥–∏–ª –£–ó–ò" />
      <label for="uziDaysFromInsemination">–î–Ω–µ–π –æ—Ç –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è</label>
      <input type="text" id="uziDaysFromInsemination" readonly placeholder="‚Äî" style="background: var(--color-bg-elevated);" />
      <div class="form-actions">
        <button type="button" onclick="navigate('menu')">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </form>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
  <div id="add-screen" class="screen">
    <h1 id="addScreenTitle">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–æ—Ä–æ–≤—É</h1>
    <form class="form" onsubmit="saveCurrentEntry(); return false;">
      <label for="cattleId">–ù–æ–º–µ—Ä –∫–æ—Ä–æ–≤—ã *</label>
      <input type="text" id="cattleId" required />

      <label for="nickname">–ö–ª–∏—á–∫–∞</label>
      <input type="text" id="nickname" />

      <label for="group">–ì—Ä—É–ø–ø–∞</label>
      <input type="text" id="group" placeholder="–ú–µ—Å—Ç–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è" />

      <label for="birthDate">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
      <input type="date" id="birthDate" />

      <label for="lactation">–õ–∞–∫—Ç–∞—Ü–∏—è</label>
      <input type="number" id="lactation" min="1" max="20" placeholder="‚Äî" />

      <label for="calvingDate">–î–∞—Ç–∞ –æ—Ç—ë–ª–∞</label>
      <input type="date" id="calvingDate" />

      <label for="inseminationDate">–î–∞—Ç–∞ –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è</label>
      <input type="date" id="inseminationDate" />

      <label for="attemptNumber">–ù–æ–º–µ—Ä –ø–æ–ø—ã—Ç–∫–∏</label>
      <input type="number" id="attemptNumber" value="1" />

      <label for="bull">–ë—ã–∫</label>
      <input type="text" id="bull" />

      <label for="inseminator">–û—Å–µ–º–µ–Ω–∏—Ç–µ–ª—å</label>
      <input type="text" id="inseminator" />

      <label for="code">–ö–æ–¥</label>
      <input type="text" id="code" />

      <label for="status">–°—Ç–∞—Ç—É—Å</label>
      <select id="status">
        <option value="">‚Äî</option>
        <option>–û—Å–µ–º–µ–Ω–µ–Ω–Ω–∞—è</option>
        <option>–•–æ–ª–æ—Å—Ç–∞—è</option>
        <option>–°—Ç–µ–ª—å–Ω–∞—è</option>
        <option>–°—É—Ö–æ—Å—Ç–æ–π</option>
        <option>–û—Ç—ë–ª</option>
        <option>–ë—Ä–∞–∫</option>
      </select>

      <label for="exitDate">–î–∞—Ç–∞ –≤—ã–±—ã—Ç–∏—è</label>
      <input type="date" id="exitDate" />

      <label for="dryStartDate">–ù–∞—á–∞–ª–æ —Å—É—Ö–æ—Å—Ç–æ—è</label>
      <input type="date" id="dryStartDate" />

      <label for="vwp">–ü–î–û (–¥–Ω–µ–π –æ—Ç –æ—Ç—ë–ª–∞ –¥–æ 1-–≥–æ –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è)</label>
      <input type="text" id="vwp" readonly placeholder="‚Äî" title="–†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏" />

      <label for="protocolName">–ü—Ä–æ—Ç–æ–∫–æ–ª</label>
      <input type="text" id="protocolName" />

      <label for="protocolStartDate">–ù–∞—á–∞–ª–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞</label>
      <input type="date" id="protocolStartDate" />

      <label for="note">–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ</label>
      <textarea id="note"></textarea>

      <div class="form-actions">
        <button type="button" onclick="cancelEdit()" id="cancelButton">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit" id="saveButton">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </form>

    <div id="entriesList"></div>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–ø–∏—Å–µ–π -->
  <div id="view-screen" class="screen view-screen">
    <!-- –í–µ—Ä—Ö–Ω–∏–π –±–ª–æ–∫: –∑–∞–∫—Ä–µ–ø–ª—ë–Ω –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç–∫–µ —Å–ø–∏—Å–∫–∞ -->
    <div class="view-screen-header">
      <button onclick="navigate('menu')" class="back-button view-screen-back">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
      <h1>üìã –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö</h1>
      <button type="button" class="small-btn" id="viewFieldsSettingsBtn">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–µ–π</button>
      <div id="search-filter-container" class="search-filter-container"></div>
      <div id="viewBulkActions" class="view-bulk-actions"></div>
    </div>
    <div id="viewEntriesList" class="view-entries-wrapper"></div>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ -->
  <div id="view-cow-screen" class="screen view-cow-screen">
    <div class="view-cow-header">
      <button onclick="navigate('view')" class="back-button view-cow-back">–ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</button>
      <h1>üîç –ü—Ä–æ—Å–º–æ—Ç—Ä –∂–∏–≤–æ—Ç–Ω–æ–≥–æ</h1>
    </div>
    <div id="viewCowCard" class="view-cow-body"></div>
  </div>

  <!-- –≠–∫—Ä–∞–Ω ¬´–í—Å–µ –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è¬ª -->
  <div id="all-inseminations-screen" class="screen">
    <div class="view-screen-header">
      <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é</button>
      <h1>üìë –í—Å–µ –æ—Å–µ–º–µ–Ω–µ–Ω–∏—è</h1>
    </div>
    <div id="allInseminationsList" class="view-entries-wrapper" style="padding: 12px; overflow: auto;"></div>
  </div>

  <!-- –≠–∫—Ä–∞–Ω —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π -->
  <div id="notifications-screen" class="screen">
    <h1>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h1>
    <div id="notification-center-container"></div>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ -->
  <div id="analytics-screen" class="screen">
    <h1>üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h1>
    <div class="analytics-controls">
      <label>–ü–µ—Ä–∏–æ–¥: <select id="analyticsPeriod">
        <option value="month">–ú–µ—Å—è—Ü</option>
        <option value="quarter">–ö–≤–∞—Ä—Ç–∞–ª</option>
        <option value="year">–ì–æ–¥</option>
      </select></label>
      <button type="button" id="analyticsRefreshBtn" class="small-btn">–û–±–Ω–æ–≤–∏—Ç—å</button>
    </div>
    <div id="analyticsIndicators" class="analytics-indicators"></div>
    <div id="analyticsCharts" class="analytics-charts"></div>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è -->
  <div id="backup-screen" class="screen">
    <h1>üíæ –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏</h1>
    <div class="backup-actions">
      <button type="button" class="action-btn" onclick="handleCheckForUpdates()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è</button>
    </div>
    <div id="backup-container"></div>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–µ–π -->
  <div id="viewFieldsSettingsModal" class="view-fields-modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="view-fields-modal-content">
      <div class="view-fields-modal-header">
        <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–µ–π</h2>
        <button type="button" class="small-btn" id="viewFieldsCloseBtn">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
      <div id="viewFieldsList" class="view-fields-list"></div>
      <div class="view-fields-actions">
        <button type="button" class="small-btn" id="viewFieldsResetBtn">–°–±—Ä–æ—Å–∏—Ç—å</button>
        <button type="button" class="action-btn" id="viewFieldsSaveBtn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π –∫–∞—Ä—Ç–æ—á–∫–∏ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ -->
  <div id="viewCowActionHistoryModal" class="view-fields-modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="view-fields-modal-content">
      <div class="view-fields-modal-header">
        <h2>–ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π</h2>
        <button type="button" class="small-btn" id="viewCowActionHistoryCloseBtn">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
      <div id="viewCowActionHistoryList" class="view-fields-list" style="max-height: 60vh; overflow-y: auto;"></div>
    </div>
  </div>

  <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ -->
  <div id="firstRunHints" class="first-run-hints" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="first-run-hints-content">
      <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</h2>
      <ul>
        <li>–í—ã–±–µ—Ä–∏—Ç–µ –æ–±—ä–µ–∫—Ç (–±–∞–∑—É) –≤–≤–µ—Ä—Ö—É –∏ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –Ω–æ–≤—ã–µ –∫–Ω–æ–ø–∫–æ–π ¬´–î–æ–±–∞–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç¬ª.</li>
        <li>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–Ω—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ –∏ –≤ —Ä–∞–∑–¥–µ–ª–µ ¬´–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è¬ª.</li>
        <li>–†–∞–∑–¥–µ–ª ¬´–†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏¬ª —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∂–∏–≤–æ—Ç–Ω—ã—Ö –∏ –∏–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç.</li>
      </ul>
      <div class="first-run-hints-actions">
        <button type="button" class="small-btn" id="firstRunHintsSkip">–ù–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
        <button type="button" class="action-btn" id="firstRunHintsClose">–ü–æ–Ω—è—Ç–Ω–æ</button>
      </div>
    </div>
  </div>

  <div id="protocols-screen" class="screen">
    <h1>üìã –ü—Ä–æ—Ç–æ–∫–æ–ª—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏</h1>
    <div id="protocols-container"></div>
    <button type="button" onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

  <!-- –≠–∫—Ä–∞–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ -->
  <div id="sync-screen" class="screen">
    <h1>üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</h1>
    <div class="sync-controls">
      <button onclick="exportData()">–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
      <label for="importFileJson">–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (JSON)
        <input type="file" id="importFileJson" accept=".json" onchange="importData(event)" />
      </label>
      <div id="syncStatus" class="sync-status"></div>
    </div>
    <button onclick="navigate('menu')" class="back-button">–ù–∞–∑–∞–¥</button>
  </div>

   <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ -->
  <!-- PapaParse –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ CSV, Chart.js –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤, SheetJS –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ xlsx -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/events.js"></script>
  <script src="js/api-client.js"></script>
  <script src="js/storage-objects.js"></script>
  <script src="js/storage-entries.js"></script>
  <script src="js/storage-integrity.js"></script>
  <script src="js/storage.js"></script>
  <script src="js/core.js"></script>
  <script src="js/users.js"></script>
  <script src="js/ui-helpers.js"></script>
  <script src="js/cow-operations.js"></script>
  <script src="js/voice-handler.js"></script>
  <script src="js/app.js"></script>
  <script src="js/sync.js"></script>
  <script src="js/export-import.js"></script>
  <script src="js/export-excel.js"></script>
  <script src="js/insemination.js"></script>
  <script src="js/view-cow.js"></script>
  <script src="js/search-filter.js"></script>
  <script src="js/notifications.js"></script>
  <script src="js/analytics.js"></script>
  <script src="js/backup.js"></script>
  <script src="js/view-list.js"></script>
  <script src="js/protocols.js"></script>
  <!-- menu.js –ø–æ—Å–ª–µ–¥–Ω–∏–º -->
  <script src="js/menu.js"></script>
  <script>
  (function() {
    function setPrintHeaderDate() {
      var el = document.getElementById('print-doc-date');
      if (el) el.textContent = new Date().toLocaleDateString('ru-RU', { day: 'numeric', month: 'long', year: 'numeric' });
    }
    window.addEventListener('beforeprint', setPrintHeaderDate);
  })();
  </script>
</body>
</html>